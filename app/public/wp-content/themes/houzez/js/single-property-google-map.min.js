jQuery(function(o){"use strict";if("undefined"!=typeof houzez_single_property_map&&!(o("#houzez-single-listing-map").length<=0)){var e,a,p=0,t=15,i=!1,n="",s="no",l="roadmap";if("undefined"!=typeof houzez_map_options){if(n=houzez_map_options.infoWindowPlac,s=houzez_map_options.markerPricePins,l=houzez_map_options.map_type,a=houzez_map_options.map_pin_type,e=houzez_map_options.googlemap_stype,0==houzez_map_options.show_map)return;"circle"==a&&(i=!0),0<houzez_map_options.single_map_zoom&&(t=parseInt(houzez_map_options.single_map_zoom)),""!=e&&JSON.parse(e)}var r=new google.maps.LatLng(houzez_single_property_map.lat,houzez_single_property_map.lng),m={center:r,zoom:t,disableDefaultUI:!1,scrollwheel:!1},g={position:r,pov:{heading:34,pitch:10}},_=new google.maps.Map(document.getElementById("houzez-single-listing-map"),m);switch(l){case"hybrid":m.mapTypeId=google.maps.MapTypeId.HYBRID;break;case"terrain":m.mapTypeId=google.maps.MapTypeId.TERRAIN;break;case"satellite":m.mapTypeId=google.maps.MapTypeId.SATELLITE;break;default:m.mapTypeId=google.maps.MapTypeId.ROADMAP}o(".houzezMapType").on("click",function(e){e.preventDefault();e=o(this).data("maptype");"roadmap"===(e=e)?_.setMapTypeId(google.maps.MapTypeId.ROADMAP):"satellite"===e?_.setMapTypeId(google.maps.MapTypeId.SATELLITE):"hybrid"===e?_.setMapTypeId(google.maps.MapTypeId.HYBRID):"terrain"===e&&_.setMapTypeId(google.maps.MapTypeId.TERRAIN)}),document.getElementById("listing-mapzoomin")&&(v=_,google.maps.event.addDomListener(document.getElementById("listing-mapzoomin"),"click",function(){var e=parseInt(v.getZoom(),10);console.log(e),20<++e&&(e=20),v.setZoom(e)})),document.getElementById("listing-mapzoomout")&&(I=_,google.maps.event.addDomListener(document.getElementById("listing-mapzoomout"),"click",function(){var e=parseInt(I.getZoom(),10);console.log(e),--e<0&&(e=0),I.setZoom(e)}));var d,c,z;google.maps.event.addListener(_,"tilesloaded",function(){jQuery(".houzez-map-loading").hide()}),o('a[href="#pills-street-view"]').on("shown.bs.tab",function(){(p+=1)<=1&&new google.maps.StreetViewPanorama(document.getElementById("pills-street-view"),g)}),i&&(f=_,new google.maps.Circle({strokeColor:"#4f5962",strokeOpacity:.8,strokeWeight:2,fillColor:"#4f5962",fillOpacity:.35,map:f,center:r,radius:300})),i||(d="yes"==s?(s='<div data-id="'+houzez_single_property_map.property_id+'" class="gm-marker gm-marker-color-'+houzez_single_property_map.term_id+'"><div class="gm-marker-price">'+houzez_single_property_map.pricePin+"</div></div>",new RichMarker({map:_,position:r,draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:s})):(d=houzez_single_property_map.marker,z=new google.maps.Size(44,56),1.5<window.devicePixelRatio&&houzez_single_property_map.retinaMarker&&(d=houzez_single_property_map.retinaMarker,z=new google.maps.Size(44,56)),c={url:d,size:z,scaledSize:new google.maps.Size(44,56)},new google.maps.Marker({position:r,map:_,icon:c,animation:google.maps.Animation.DROP})),(z=document.createElement("div")).className="map-info-window",c="",c+='<div class="item-wrap">',c+='<div class="item-header">',houzez_single_property_map.thumbnail?c+='<a class="hover-effect"><img class="img-fluid listing-thumbnail" src="'+n+'" data-src="'+houzez_single_property_map.thumbnail+'" alt="'+houzez_single_property_map.title+'"/></a>':c+='<a class="hover-effect"><img class="img-fluid listing-thumbnail" src="'+n+'" alt="'+houzez_single_property_map.title+'"/></a>',c+="</div>",c+='<div class="item-body flex-grow-1">',c+='<h2 class="item-title">',c+="<a>"+houzez_single_property_map.title+"</a>",c+="</h2>",c+='<ul class="list-unstyled item-info">',houzez_single_property_map.price&&(c+='<li class="item-price">'+houzez_single_property_map.price+"</li>"),houzez_single_property_map.property_type&&(c+='<li class="item-type">'+houzez_single_property_map.property_type+"</li>"),c+="</ul>",c+="</div>",c+="</div>",z.innerHTML=c,z=new google.maps.InfoWindow({content:z}),u=_,y=d,h=z,google.maps.event.addListener(y,"click",function(){h.open(u,y);var e=h.getContent().getElementsByClassName("listing-thumbnail");e.length&&e[0].dataset.src&&(e[0].src=e[0].dataset.src)}))}var u,y,h,f,I,v});