jQuery(function(r){"use strict";if("undefined"!=typeof houzez_map_properties){if(0<r("#houzez-properties-map").length){var p,u,c=null,m=new Array,d=new Array,g="",h=1,z=12,_="",v=0,a=0,o=0,f="no",e="",t="roadmap",s=houzez_vars.admin_url+"admin-ajax.php",l=houzez_vars.user_id,y=houzez_vars.not_found,w=houzez_vars.houzez_rtl,I=houzez_vars.processing_text,x=houzez_vars.compare_url,M=houzez_vars.compare_add_icon,b=houzez_vars.add_compare_text,k=houzez_vars.compare_remove_icon,T=houzez_vars.remove_compare_text,L=houzez_vars.compare_limit,n=(houzez_vars.compare_page_not_found,houzez_vars.for_rent_price_slider),i=parseInt(houzez_vars.search_min_price_range),j=parseInt(houzez_vars.search_max_price_range),E=parseInt(houzez_vars.search_min_price_range_for_rent),D=parseInt(houzez_vars.search_max_price_range_for_rent),P=(parseInt(houzez_vars.get_min_price),parseInt(houzez_vars.get_max_price),houzez_vars.currency_position),A=houzez_vars.currency_symbol,R=houzez_vars.thousands_separator,B=parseInt(houzez_vars.is_halfmap),S=parseFloat(houzez_vars.default_lat),Z=parseFloat(houzez_vars.default_long),C=parseInt(houzez_vars.houzez_default_radius),H=/ipad|iphone|ipod|android|blackberry|webos|iemobile|windows phone/i.test(navigator.userAgent.toLowerCase()),w="yes"==w;"undefined"!=typeof houzez_map_options&&(g=houzez_map_options.clusterIcon,h=houzez_map_options.map_cluster_enable,z=houzez_map_options.clusterer_zoom,_=houzez_map_options.infoWindowPlac,v=houzez_map_options.marker_spiderfier,f=houzez_map_options.markerPricePins,t=houzez_map_options.map_type,""!=(e=houzez_map_options.googlemap_style)&&(e=JSON.parse(e)));var O={zoom:12,maxZoom:16,disableDefaultUI:!0,scrollwheel:!1,styles:e},N={"&amp;":"&","&quot;":'"',"&#039;":"'","&#8217;":"’","&#038;":"&","&lt;":"<","&gt;":">","&#8216;":"‘","&#8230;":"…","&#8221;":"”","&#8211;":"–","&#8212;":"—"};switch(t){case"hybrid":O.mapTypeId=google.maps.MapTypeId.HYBRID;break;case"terrain":O.mapTypeId=google.maps.MapTypeId.TERRAIN;break;case"satellite":O.mapTypeId=google.maps.MapTypeId.SATELLITE;break;default:O.mapTypeId=google.maps.MapTypeId.ROADMAP}F=new google.maps.Map(document.getElementById("houzez-properties-map"),O),p=new google.maps.LatLngBounds;var U=e=>{if("number"!=typeof e)return e;for(var e=(e+="").split("."),a=e[0],e=1<e.length?"."+e[1]:"",t=/(\d+)(\d{3})/;t.test(a);)a=a.replace(t,"$1"+R+"$2");return a+e};r(".houzezMapType").on("click",function(e){e.preventDefault();e=r(this).data("maptype");"roadmap"===(e=e)?F.setMapTypeId(google.maps.MapTypeId.ROADMAP):"satellite"===e?F.setMapTypeId(google.maps.MapTypeId.SATELLITE):"hybrid"===e?F.setMapTypeId(google.maps.MapTypeId.HYBRID):"terrain"===e&&F.setMapTypeId(google.maps.MapTypeId.TERRAIN)}),document.getElementById("listing-mapzoomin")&&(re=F,google.maps.event.addDomListener(document.getElementById("listing-mapzoomin"),"click",function(){var e=parseInt(re.getZoom(),10);console.log(e),20<++e&&(e=20),re.setZoom(e)})),document.getElementById("listing-mapzoomout")&&(ie=F,google.maps.event.addDomListener(document.getElementById("listing-mapzoomout"),"click",function(){var e=parseInt(ie.getZoom(),10);console.log(e),--e<0&&(e=0),ie.setZoom(e)})),r("#houzez-gmap-next").on("click",function(){!function(e){for(++a>m.length&&(a=1);!1===m[a-1].visible;)++a>m.length&&(a=1);m[a]&&(m[a].getMap()||0==h||(c.setMaxZoom(1),c.repaint())),google.maps.event.trigger(m[a-1],"click"),null!=m[a-1].getPosition()&&e.panTo(m[a-1].getPosition())}(F)}),r("#houzez-gmap-prev").on("click",function(){!function(e){for(--a<1&&(a=m.length);!1===m[a-1].visible;)--a>m.length&&(a=1);m[a]&&(m[a].getMap()||0==h||(c.setMaxZoom(1),c.repaint())),google.maps.event.trigger(m[a-1],"click"),null!=m[a-1].getPosition()&&e.panTo(m[a-1].getPosition())}(F)});google.maps.event.addListener(F,"tilesloaded",function(){jQuery(".houzez-map-loading").hide()});var F,W=function(){0!=h&&null!=c&&c.clearMarkers()},$=function(){for(var e=0;e<m.length;e++)m[e].setMap(null);m=[]},q=function(){F.fitBounds(m.reduce(function(e,a){return e.extend(a.getPosition())},new google.maps.LatLngBounds))},Q=function(e,a){var t;0!=v&&(t=new OverlappingMarkerSpiderfier(a,{markersWontMove:!0,markersWontHide:!0,keepSpiderfied:!0,circleSpiralSwitchover:1/0,nearbyDistance:50})),u=function(){for(;0<d.length;)d.pop().close()};for(var o,n,i,r,s,l=0;l<e.length;l++)e[l].lat&&e[l].lng&&(n="yes"==f?(o='<div data-id="'+e[l].property_id+'" class="gm-marker gm-marker-color-'+e[l].term_id+'"><div class="gm-marker-price">'+e[l].pricePin+"</div></div>",new RichMarker({map:a,position:new google.maps.LatLng(e[l].lat,e[l].lng),draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:o})):(n=e[l].marker,i=new google.maps.Size(44,56),1.5<window.devicePixelRatio&&e[l].retinaMarker&&(n=e[l].retinaMarker,i=new google.maps.Size(44,56)),r={url:n,size:i,scaledSize:new google.maps.Size(44,56)},new google.maps.Marker({position:new google.maps.LatLng(e[l].lat,e[l].lng),map:a,icon:r,title:e[l].title.replace(/\&[\w\d\#]{2,5}\;/g,function(e){return N[e]}),animation:google.maps.Animation.DROP,visible:!0})),p.extend(n.getPosition()),(i=document.createElement("div")).className="map-info-window",r="",r+='<div class="item-wrap">',r+='<div class="item-header">',e[l].thumbnail?r+='<a class="hover-effect" href="'+e[l].url+'"><img class="img-fluid listing-thumbnail" src="'+_+'" data-src="'+e[l].thumbnail+'" alt="'+e[l].title+'"/></a>':r+='<a class="hover-effect" href="'+e[l].url+'"><img class="img-fluid listing-thumbnail" src="'+_+'" alt="'+e[l].title+'"/></a>',r+="</div>",r+='<div class="item-body flex-grow-1">',r+='<h2 class="item-title">',r+='<a href="'+e[l].url+'">'+e[l].title+"</a>",r+="</h2>",r+='<ul class="list-unstyled item-info">',e[l].price&&(r+='<li class="item-price">'+e[l].price+"</li>"),e[l].property_type&&(r+='<li class="item-type">'+e[l].property_type+"</li>"),r+="</ul>",r+="</div>",r+="</div>",i.innerHTML=r,function(a,t,o){google.maps.event.addListener(t,"click",function(){u(),o.open(a,t),d.push(o);var e=o.getContent().getElementsByClassName("listing-thumbnail");e.length&&e[0].dataset.src&&(e[0].src=e[0].dataset.src)})}(a,n,new google.maps.InfoWindow({content:i})),0!=v&&t.addMarker(n),m.push(n));a.fitBounds(p),0!=h&&(s={ignoreHidden:!0,maxZoom:parseInt(z),styles:[{url:g,height:48,width:48,textColor:"#ffffff"}]},c=new MarkerClusterer(a,m,s))};0<houzez_map_properties.length?Q(houzez_map_properties,F):(O={center:new google.maps.LatLng(S,Z),zoom:10,maxZoom:16,styles:e,disableDefaultUI:!0,scrollwheel:!1},F=new google.maps.Map(document.getElementById("houzez-properties-map"),O),jQuery(".houzez-map-loading").hide());var G=function(){return r("#half-map-listing-area .item-listing-wrap").each(function(e){r(this).on("mouseenter",function(){F&&(m[e].getMap()||0==h||(c.setMaxZoom(1),c.repaint()),google.maps.event.trigger(m[e],"click"))})}),r("#half-map-listing-area .item-listing-wrap").on("mouseleave",function(){u(),0!=h&&(c.setMaxZoom(13),c.repaint())}),!1};H||G();var Y=function(e){var t=r("#houzez_ajax_container"),o=r("#half-map-listing-area .page-title span"),a=r(".houzez-search-form-js"),n=r("#ajax_sort_properties").val(),i=r(".listing-view").data("layout");return r(this).parents(".houzez-search-form-js").addClass("sdfsdfsdffs"),r.ajax({type:"GET",dataType:"json",url:s,data:a.serialize()+"&action=houzez_half_map_listings&paged="+e+"&sortby="+n+"&item_layout="+i,beforeSend:function(){r(".houzez-map-loading").show(),t.empty().append('<div id="houzez-map-loading" class="houzez-map-loading"><div class="mapPlaceholder"><div class="loader-ripple spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>')},success:function(e){var a;return""!=e.query&&r('input[name="search_args"]').val(e.query),""!=e.search_uri&&r('input[name="search_URI"]').val(e.search_uri),r(".map-notfound").remove(),r(".search-no-results-found").remove(),r(".houzez-map-loading").hide(),!0===e.getProperties?(W(),$(),Q(e.properties,F),q(),t.empty().html(e.propHtml),o.empty().html(e.total_results),V(),houzez_init_add_favorite(s,l),houzez_init_remove_favorite(s,l),houzez_listing_lightbox(s,I,w,l),houzez_grid_image_gallery(),houzez_grid_call_to_action(),a=houzezGetCookie("houzez_compare_listings"),add_to_compare(x,M,k,b,T,L,a,4),remove_from_compare(a,M,k,b,T),H||G(),r('[data-toggle="tooltip"]').tooltip()):(W(),$(),r("#houzez-properties-map").append('<div class="map-notfound">'+y+"</div>"),t.empty().html('<div class="search-no-results-found">'+y+"</div>"),o.empty().html(e.total_results)),!1},error:function(e,a,t){console.log(e.status),console.log(e.responseText),console.log(t)}}),!1},J=()=>{var e=r("form.houzez-search-filters-js");if(null==(a=e.attr("action")))return!0;var e=e.find(":input").filter(function(e,a){if(""!=r(a).val()&&"search_geolocation"!=r(a).attr("name")&&"search_URI"!=r(a).attr("name")&&"search_args"!=r(a).attr("name")&&"houzez_save_search_ajax"!=r(a).attr("name"))return!0}).serialize(),a=null==a?"":(a.indexOf("?"),a+"?"+e);a=a,window.history.pushState({houzezTheme:!0},"",a)},K=function(e){W(),r(".hz-halfmap-paged").val(e),J(),Y(e)},V=function(){return r(".houzez_ajax_pagination a").on("click",function(e){e.preventDefault(),o=r(this).data("houzepagi"),K(o)}),!1};V();r("#ajax_sort_properties").on("change",function(){K(o=0)});var X=function(e,a){var t;r(".price-range").slider({range:!0,min:e,max:a,values:[e,a],slide:function(e,a){var t,o;o="after"==P?(t=U(a.values[0])+A,U(a.values[1])+A):(t=A+U(a.values[0]),A+U(a.values[1])),r(".min-price-range-hidden").val(a.values[0]),r(".max-price-range-hidden").val(a.values[1]),r(".min-price-range").text(t),r(".max-price-range").text(o)},stop:function(e,a){K(o=0)}}),a="after"==P?(t=U(r(".price-range").slider("values",0))+A,U(r(".price-range").slider("values",1))+A):(t=A+U(r(".price-range").slider("values",0)),A+U(r(".price-range").slider("values",1))),r(".min-price-range").text(t),r(".max-price-range").text(a),r(".min-price-range-hidden").val(r(".price-range").slider("values",0)),r(".max-price-range-hidden").val(r(".price-range").slider("values",1))};0<r(".price-range").length&&1==B&&(r("select.status-js").val()==n?X(E,D):X(i,j),r("select.status-js").on("change",function(){r(this).val()==n?X(E,D):X(i,j)}));0<r("#radius-range-slider").length&&(ne=C,r("#radius-range-slider").slider({value:ne,min:0,max:100,step:1,value:r("#radius-range-value").data("default"),slide:function(e,a){r("#radius-range-text").html(a.value),r("#radius-range-value").val(a.value)},stop:function(e,a){0<r("#houzez-properties-map").length&&K(o=0)}}),r("#radius-range-text").html(r("#radius-range-slider").slider("value")),r("#radius-range-value").val(r("#radius-range-slider").slider("value"))),r("select.houzez_search_ajax, input.houzez_search_ajax").on("change",function(){K(o=0)}),0<r(".half-map-wrap").length&&r(".btn-apply, .half-map-search-js-btn, #auto_complete_ajax").on("click",function(e){e.preventDefault(),K(o=0)})}var ee,ae,te,oe;r("#houzez-btn-map-view").on("click",function(e){e.preventDefault(),r("#half-map-listing-area, .listing-wrap").hide(),r("#map-view-wrap").show(),google.maps.event.trigger(F,"resize"),q()}),r("#houzez-btn-listing-view").on("click",function(e){e.preventDefault(),r("#map-view-wrap").hide(),r("#half-map-listing-area, .listing-wrap").show()}),0<r(".hz-map-field-js").length&&(ee=houzez_vars.geo_country_limit,ae=houzez_vars.geocomplete_country,(te=function(e){this.$container=e}).prototype={init:function(){this.initDomElements(),this.autocomplete()},initDomElements:function(){this.addressField=this.$container.data("address-field")},autocomplete:function(){var a,t=this,e=this.addressField;null!==e&&(e=document.getElementById(e),a=new google.maps.places.Autocomplete(e,{types:["geocode","establishment"]}),0!=ee&&""!=ae&&("UAE"==ae&&(ae="AE"),a.setComponentRestrictions({country:[ae]})),google.maps.event.addListener(a,"place_changed",function(){var e=a.getPlace(),e=new google.maps.LatLng(e.geometry.location.lat(),e.geometry.location.lng());t.updateCoordinate(e),B&&K(0)}))},updateCoordinate:function(e){r('input[name="lat"]').val(e.lat()),r('input[name="lng"]').val(e.lng())}},oe=function(){var e=r(this);new te(e).init()},r(".hz-map-field-js").each(oe))}var ne,ie,re});